@model Models.ProfileModel
@{
    var profilePicture = "../Images/img_avatar.png";
    if(Model !=null && Model.Photo != "") {
        profilePicture = Model.Photo;
    }
}

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@700&display=swap" rel="stylesheet">

<!-- Styles  -->
<link rel="stylesheet" type="text/css" href="./Styles/Profiles/Profile.css">

<!-- Scripts  -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    // This is temporary
    // Need to set profileId in localstorage at currentProfile.profileId
    localStorage.setItem('profileId', "@Model.Id");  
</script>    
<script src="./Scripts/Profile.js"></script>

<body>
    <div class="profile-container">

        <div class="profile-cover-container">
            @* <img id="profile-cover-img" src="../Images/img-cover.png"> *@
        </div>

        <div class="profile-photo-container">
            <img id="profile-photo-img" src=@profilePicture >
        </div>
        <button class="photo-edit-btn" id="photo-edit-btn">Change photo</button>
        <div class="profile-photo-edit-modal" id="profile-photo-edit-modal">
            <div class="modal-container">
                <span id="profile-photo-close-modal">&times;</span>
                <h2 class="profile-photo-title-modal">Update Profile Picture</h2>
                <hr>
                <form class="form-edit" id="form-profile-picture">
                    <input type="file" id="myFile" name="ProfilePicture" accept="image/*" data-type='image' >
                </form>
                <div class="profile-photo-modal">
                    <img id="profile-photo-modal-img" src=@profilePicture >
                </div>
                <button class="profile-photo-btn" id="photo-save-btn">Save</button>
                <button class="profile-photo-btn" id="photo-cancel-btn">Cancel</button>
            </div>
        </div>

        <div class="profile-name-container">
            <h1>@Model.FullName</h1>
        </div>

        <div class="profile-about-container">
            <div class="profile-about-readonly">
                <h2 id="profile-about-text">@Model.About</h2>
                <button class="profile-about-btn" id="about-edit-btn">Edit</button>
            </div>
            
            <div class="profile-about-edit">
                <form class="form-edit" id="form-profile-about">
                    <textarea class="form-edit-about" id="form-edit-about" name="About" value=@Model.About ></textarea>
                </form>
                <div class="profile-about-btn-holder">
                    <button class="profile-about-btn" id="about-cancel-btn">Cancel</button>
                    <button class="profile-about-btn" id="about-save-btn">Save</button>
                </div>
            </div>
            
        </div>
        <div class="profile-tabs-container">
            <hr>
            <div class="profile-btn-container">
                <button class="ext-btn" id="ext-posts-btn">Posts</button>
                <button class="ext-btn" id="ext-about-btn">About</button>
                <button class="ext-btn" id="ext-friends-btn">Friends</button>
                <button class="ext-btn" id="ext-album-btn">Album</button>
            </div>
        </div>
    </div>
    @await Html.PartialAsync("ProfileExtension.cshtml")
</body>
